# μ–΄λ…Έν…μ΄μ…(Annotations)
- - -
###### β— ν•΄λ‹Ή κΈ€μ€ μ κ°€ κ³µλ¶€ν–λ κΈ°μ–µ(λ„μ„ λ° ν¬μ¤νΈ λ“±)κ³Ό κ°μΈμ  μκ²¬μ΄ μ„μ—¬ μ‘μ„±λμ—κΈ° λ•λ¬Έμ— ν‹€λ¦¬κ±°λ‚ μ λ€λ΅ μ„¤λ…ν•μ§€ λ»ν• λ¶€λ¶„μ΄ μμ„ μ μμµλ‹λ‹¤. μκ²¬ λ‚¨κ²¨μ£Όμ‹λ©΄ κ°μ‚¬ν μ—¬κΈ°λ©° μμ •ν•λ„λ΅ ν•κ² μµλ‹λ‹¤.β—

β—€οΈ [μ΄μ „κΈ€. κ°€λΉ„μ§€ μ»¬λ ‰μ…κ³Ό JVM](https://github.com/kkhs00224/mystudy/blob/main/java/2_Garbage_Collection.md)   
β–¶οΈ   

## 1. μ–΄λ…Έν…μ΄μ…μ μ©λ„
 μλ°”λ¥Ό μ‚¬μ©ν•λ©΄μ„, κ·Έλ¦¬κ³  μ¤ν”„λ§ ν”„λ μ„μ›ν¬λ¥Ό μ‚¬μ©ν•λ©΄μ„ μ°λ¦¬λ” λ§μ€ μ–΄λ…Έν…μ΄μ…μ„ λ§λ‚κ² λλ‹¤. μ¤ν”„λ§μ—μ„λ” ν•΄λ‹Ή ν”„λ μ„μ›ν¬μ—μ„ ν™•μ¥λ κ°λ³„ μ–΄λ…Έν…μ΄μ…λ“¤μ„ λ§μ΄ κ°€μ§€κ³  μμ§€λ§, μλ°”μ—μ„μ μ©λ„μ™€ κµ¬ν„λ²•μ„ λ³΄λ©° μ–΄λ…Έν…μ΄μ…μ— λ€ν•΄ μ•μ•„λ³΄λ„λ΅ ν•μ.   
 μ°μ„  μ–΄λ…Έν…μ΄μ…(Annotation, μ£Όμ„)μ€ λ‹¤μμ μ„Έ κ°€μ§€λ΅ μ©λ„λ¥Ό κµ¬λ¶„ν•΄λ³Ό μ μλ‹¤.

- μ»΄νμΌλ¬λ¥Ό μ„ν• μ •λ³΄ - μ»΄νμΌλ¬ μ¤λ¥λ¥Ό κ°μ§€ν•κ±°λ‚ κ²½κ³ λ¥Ό μ–µμ ν•  μ μλ‹¤.
- μ»΄νμΌ μ‹κ°„(compile-time)κ³Ό λ°°ν¬ μ‹κ°„(deployment-time) μ²λ¦¬ - μ†ν”„νΈμ›¨μ–΄ λ„κµ¬λ” μ–΄λ…Έν…μ΄μ…(anotation, μ£Όμ„) μ •λ³΄λ¥Ό μ²λ¦¬ν•μ—¬ μ½”λ“, XML νμΌ λ“±μ„ μƒμ„±ν•  μ μλ‹¤.
- λ°νƒ€μ„ μ²λ¦¬(Runtime processing) - μΌλ¶€ μ–΄λ…Έν…μ΄μ…μ€ λ°νƒ€μ„μ„ κ²€μ‚¬ν•  μ μλ‹¤.

 μ–΄λ–¤ μ©λ„λ΅ μ“°μ΄λ”μ§€ κ°λµμ μΌλ΅ μ•μ•„λ΄¤μΌλ‹ μ΄μ  μμ„Έν•κ² μ‚¬μ©ν•  μ μλ” μ„μΉ, μ μ©ν•λ” λ°©λ²•, μλ°” ν”λ«νΌ ν‘μ¤€μ—μ„ μ΄μ©ν•  μ μλ” λ―Έλ¦¬ μ •μλ μ£Όμ„μ μ ν•, νƒ€μ… μ• λ…Έν…μ΄μ…μ„ ν”λ¬κ·Έ κ°€λ¥ν• νƒ€μ… μ‹μ¤ν…κ³Ό ν•¨κ» λ” κ°•λ ¥ν• κ²€μ‚¬λ¥Ό μν–‰ν•λ” μ½”λ“ μ‘μ„±λ²•, λ°λ³µ μ–΄λ…Έν…μ΄μ… κµ¬ν„ν•λ” λ°©λ²• λ“±μ— λ€ν•΄ μ•μ•„λ³΄μ.

### 1.1 μ–΄λ…Έν…μ΄μ…μ ν•μ‹(The Format of an Annotation)
- κ³¨λ±…μ΄ κΈ°νΈ λ¬Έμ(The at sign character) '@'κ°€ λ’¤μ— μ¤λ” κ²ƒμ„ μ»΄νμΌλ¬μ—κ² μ•λ ¤μ¤€λ‹¤. λ”°λΌμ„ μ•„λ μμ—μ„ μ‚¬μ©λ μ–΄λ…Έν…μ΄μ…μ μ΄λ¦„μ€ Overrideμ΄λ‹¤. μ΄μ²λΌ μ–΄λ…Έν…μ΄μ…μ„ ν†µν•΄ ν•΄λ‹Ή λ©”μ„λ“κ°€ μƒμ„ κ°μ²΄λ΅λ¶€ν„° μ¤λ²„λΌμ΄λ“λ λ©”μ„λ“λΌλ” κ²ƒμ„ μ• μ μλ‹¤.
 ```java
 @Override
 void mySuperMethod(){ ... }
 ```

- μ–΄λ…Έν…μ΄μ…μ€ μ•„λ μμ™€ κ°™μ΄ μ΄λ¦„μ΄ μκ±°λ‚, μ—†λ” μ”μ†(element)λ¥Ό ν¬ν•¨ν•  μ μκ³ , κ·Έ μ”μ†μ— λ€ν• κ°’μ„ μ§€μ •ν•  μ μλ‹¤. λν• ```value```λΌλ” μ΄λ¦„μΌλ΅ μ§€μ •ν• μ¤μ§ ν•λ‚μ κ°’λ§ μ΅΄μ¬ν•λ” κ²½μ°, valueλ¥Ό μƒλµν•μ—¬ κ°’λ§ μ €μ¥ν•  μ μλ‹¤.
 ```java
 @Author(
   name = "Kim H.S.",
   date = "3/27/2003"
 )
 class MyClass { ... }
 
 @SuppressWarnings(value = "unchecked") // valueμ— μ €μ¥ν• "unchecked"
 void myMethod() { ... }
 
 @SuppressWarnings("unchecked") // valueλΌλ” μ΄λ¦„μ„ μƒλµν•μ—¬ κ°’λ§ μ μ„ μ μλ‹¤.
 void myMethod() { ... }
 ```
  μ„μ κ²½μ°λ“¤κ³Ό λ‹¤λ¥΄κ² μ”μ†λ¥Ό κ°€μ§€κ³  μμ§€ μ•λ‹¤λ©΄, ```@Override``` μ–΄λ…Έν…μ΄μ…μ²λΌ λ’¤μ κ΄„νΈλ¥Ό μƒλµν•  μ μλ‹¤.   

-  κ°™μ€ μ„ μ–Έ λ‚΄μ—μ„ μ—¬λ¬ κ°μ μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•  μ μλ‹¤.
 ```java
 @Author(name = "Kim H.S.")
 @EBook
 class MyClass { ... }
 ```
- κ°™μ€ νƒ€μ…μ μ–΄λ…Έν…μ΄μ…μ„ μ—¬λ¬ κ° κ°€μ§€κ³  μλ” κ²½μ°, repeating annotation(μλ°” SE 8 μ΄μƒ μ§€μ›)μ΄ νΈμ¶λλ‹¤.
 ```java
 @Author(name = "Kim H.S.")
 @Authot(name = "Kim Repeat")
 class MyClass { ... }
 ```
 Repeating annotationsμ— λ€ν•΄μ„λ” λ’¤μ—μ„ λ”μ± μμ„Έν•κ² λ‹¤λ¤„λ³΄λ„λ΅ ν•λ‹¤.   
   
 μ–΄λ…Έν…μ΄μ…μ νƒ€μ…μ€ μλ°” SE APIμ ```java.lang```λ‚ ```java.lang.annotation``` ν¨ν‚¤μ§€μ— μ •μλ νƒ€μ… μ¤‘μ—μ„ μ‚¬μ©ν•  μλ„ μκ³ , μ‚¬μ©μκ°€ μ§μ ‘ μ–΄λ…Έν…μ΄μ… νƒ€μ…μ„ μ •μν•  μλ„ μλ‹¤.   
  μ„μ μμ‹μ—μ„ μλ¥Ό λ“¤μλ©΄ "Override", "SuppressWarnings" νƒ€μ…μ΄ μλ°”μ—μ„ λ―Έλ¦¬ μ •μλ μ–΄λ…Έν…μ΄μ…μ΄κ³ , "Author", "Ebook" μ–΄λ…Έν…μ΄μ…μ΄ μ‚¬μ©μ μ •μ(custom) μ–΄λ…Έν…μ΄μ… νƒ€μ…μ΄λ‹¤.

## 2. μ–΄λ…Έν…μ΄μ…μ μ‚¬μ© μ„μΉ(Where Annotations Can Be Used)
μ–΄λ…Έν…μ΄μ…μ€ ν΄λμ¤, ν•„λ“, λ§¤μ„λ“ λ“±μ μ„ μ–Έμ— μ μ©λ  μ μλ‹¤, μ„ μ–Έμ— μ‚¬μ©λ  λ•λ” μ£Όλ΅ κ΄€λ΅€μ μΌλ΅ ν• μ¤„μ— ν‘ν„λλ” κ²½μ°κ°€ λ§μ•λ‹¤.   
ν•μ§€λ§ μλ°” SE 8μ—μ„, μ–΄λ…Έν…μ΄μ…μ€ νƒ€μ…μ μ‚¬μ©μ—λ„ μ μ©ν•  μ μκ² λμ–΄ μμ‹ λ§μ, ν•λ‚μ μ¤„μ— ν‘ν„λμ§€ μ•λ” κ²½μ°κ°€ μƒκ²Όλ‹¤. μ•„λμ μμ‹λ“¤μ΄ νƒ€μ… μ–΄λ…Έν…μ΄μ…μ„ νΈμ¶ν•λ” ν•μ‹μ΄λ‹¤.   

- ν΄λμ¤ μΈμ¤ν„΄μ¤ μƒμ„± ν‘ν„μ‹(Class instance creation expression)
  ```java
  new @Interned MyObject(); 
  ```
- νƒ€μ… μΊμ¤νΈ(type cast)
  ```java
  myString = (@NonNull String) str;
  ```
- κµ¬ν„ μ (implements clause)
  ```java
  class UnmodifiableList<T> implements
   @Readonly List<@Readonly T> { ... }
  ```
- μμ™Έ λμ§€κΈ° μ„ μ–Έ(Thrown exception declaration)
  ```java
  void monitorTemperature() throws
   @Critical TemperatureException { ... }
  ```

@Interned μ–΄λ…Έν…μ΄μ…μ μ‚¬μ©μ€ κ°μ²΄ λ™μΌμ„±(==) μ‚¬μ©μ„ μ ν¨ν•κ² λ§λ“λ” μµμ ν™” μ–΄λ…Έν…μ΄μ…μ΄λΌκ³  ν•λ‹¤. μ΄λ¥Ό μ‚¬μ©ν•λ©΄ ```new String()```λ΅ μ„ μ–Έλμ–΄ ν™ μμ—­μ—μ„ λ…λ¦½μ μΈ κ°μ²΄ μ£Όμ†λ¥Ό μ°Έμ΅°ν•κ² λμ–΄ "==" λΉ„κµκ°€ λ¶κ°€ν•κ³  ```strObj1.equal(strObj2)```μ„ μ‚¬μ©ν•΄ λ¬Έμμ—΄ λΉ„κµλ¥Ό ν•΄μ•Όν•κ² λ§λ“ λ‹¤. μ΄λ¥Ό ν™ μμ—­μ String poolμ— μ„μΉμ‹ν‚¤κ² λ§λ“¤μ–΄ "==" λ™λ“± λΉ„κµκ°€ κ°€λ¥ν•κ² λ§λ“λ” λ°©λ²•μΌλ΅ ```strObj.intern()```μ λ°ν™κ°’μ„ μ‚¬μ©ν•λ” λ°©λ²•μ΄ μλ”λ°, @Interned νƒ€μ… μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄ μ΄λ¥Ό μ‹¤ν–‰ν•λ” κ²ƒμΌλ΅ λ³΄μΈλ‹¤.   
ν•μ§€λ§ μ‹¤μ  μ½”λ“λ¥Ό μ‹¤ν–‰ν•΄λ³΄λ©΄(Java17λ΅ μ‹¤ν–‰ν–μ) @Intered μ–΄λ…Έν…μ΄μ…μ΄ ν¬ν•¨λμ–΄ μμ§€ μ•μμ„ μ• μ μλ‹¤. Java8μ—μ„λ„ μ΄ μ–΄λ…Έν…μ΄μ…μ΄ ν¬ν•¨λμ–΄ μμ§€ μ•λ‹¤κ³  ν•λ©°, [Chechker Frameworkμ μ–΄λ…Έν…μ΄μ… λ§¤λ‰΄μ–Ό](https://checkerframework.org/manual/#annotating-libraries)μ„ λ³΄λ©΄ μ• μ μλ“―μ΄ Checker Frameworkμ„ μ¶”κ°€ν•΄μ•Ό μ‚¬μ©ν•  μ μλ‹¤. ν•΄λ‹Ή ν”„λ μ„μ›ν¬λ” IDEμ—μ„ νΉμ€ Gradle, Maven λ“± λΉλ“ λ„κµ¬λ¥Ό ν†µν•΄ μ¶”κ°€ν•΄μ„ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤.
 @Readonly, @Criticalμ κ²½μ°λ„ Java SEμ—μ„ μ‹¤ν–‰μ΄ λ¶κ°€λ¥gkek.
μ¦‰, ν‘μ¤€ λ²„μ „μ— κΈ°λ³Έμ μΌλ΅ μ •μλμ–΄ μμ§€ μ•κ³  ν”„λ μ„μ›ν¬λ¥Ό μ¶”κ°€ν•΄μ•Ό μ‚¬μ©ν•  μ μλ‹¤λ” κ²ƒμΈλ°, κ³µμ‹ λ¬Έμ„μ νν† λ¦¬μ–Ό μμ μ— ν•΄λ‹Ή νƒ€μ… μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν• μ΄μ κ°€ λ¬΄μ—‡μΈμ§€ κ¶κΈν•΄μ§„λ‹¤.

## 3. μ–΄λ…Έν…μ΄μ… νƒ€μ… μ„ μ–Έ(Declaring an Annotation Type)
λ§μ€ μ–΄λ…Έν…μ΄μ…λ“¤μ΄ μ½”λ“μ μ£Όμ„(comment)λ¥Ό λ€μ²΄ν•λ‹¤.

μ•„λμ™€ κ°™μ΄ μ¤‘μ” μ •λ³΄λ“¤μ„ μ£Όμ„(comment)λ΅ λ§λ“¤μ–΄ λ†“λ”λ‹¤κ³  ν•μ.
```java
public class WorkClass {

   // Author: Kim H.S.
   // Date: 2023-07-22
   // Current revision: 2
   // Last modified: 2023-07-30
   // By: Kim H.S.
   // Reviewers: Lee, Park, Beak

   // class code goes here
   // ...

}
```
μ„ μ£Όμ„μ λ©”νƒ€λ°μ΄ν„°λ¥Ό μ–΄λ…Έν…μ΄μ…μ„ μ •μν•΄ λ€μ²΄ν•  μ μλ‹¤. μ•„λμ μ½”λ“κ°€ μ–΄λ…Έν…μ΄μ… νƒ€μ…μ„ μ •μν•λ” λ¬Έλ²•μ΄λ‹¤.
```java
@Documented
@interface ClassPreamble {
    String author();
    String date();
    int currentRevision() default 1;
    String lastModified() default "N/A";
    String lastModifiedBy() default "N/A";
    // Note use of array
    String[] reviewers();
}
```
μ–΄λ…Έν…μ΄μ… νƒ€μ…μ€ μΈν„°νμ΄μ¤ μ •μμ™€ λΉ„μ·ν•κ² "interface"λΌλ” ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•μ§€λ§, ν•΄λ‹Ή ν‚¤μ›λ“ μ•μ— "@"λ¥Ό μ‚¬μ©ν•΄ "@interface"λ΅ μ •μν•λ‹¤. μ–΄λ…Έν…μ΄μ… νƒ€μ…μ€ μΈν„°νμ΄μ¤μ ν•νƒ μ¤‘ ν•λ‚μ΄λ‹¤.   
   
μ•μ„  μμ λ“¤μ—μ„ μ”μ†(element)λ“¤μ„ μ„ μ–Έν• μ–΄λ…Έν…μ΄μ…λ“¤μ΄ μλ‹¤. λ§¤μ†λ“μ™€ λΉ„μ·ν•κ² λ³΄μΌ μ μλ”λ°, μ–΄λ…Έν…μ΄μ…μ€ κΈ°λ³Έκ°’μ„ μ •μν•  μ μλ‹¤λ” μ μ„ μ•μ•„λ‘μ.   
   
μ–΄λ…Έν…μ΄μ… νƒ€μ…μ„ μ •μν• ν›„ μ•„λμ™€ κ°™μ΄ κ°’μ„ μ±„μ› λ„£μ–΄ μ‚¬μ©ν•  μ μλ‹¤.
```java
@ClassPreamble(
        author = "Kim H.S.",
        date = "2023-07-22",
        currentRevision = 2,
        lastModified = "2023-07-30",
        lastModifiedBy = "Kim H.S.",

        reviewers = {"Lee", "Park", "Beak"}
)
public class WorkClass {

   // class code goes here
   // ...

}
```
μ£Όμν•  μ μΌλ΅, @ClassPreambleλ¥Ό JavadocμΌλ΅ μƒμ„±λ λ¬Έμ„μ— λ‚νƒ€λ‚κ² ν•λ ¤λ©΄, μ•„λμ™€ κ°™μ΄ @Documented μ–΄λ…Έν…μ΄μ…μ„ λ¶™μ—¬μ•Ό ν•λ‹¤.
```java
import java.lang.annotation.Documented;

@Documented
@interface ClassPreamble {

  // Annotation element definitions

}

```

## 4. μ‚¬μ „ μ •μ μ–΄λ…Έν…μ΄μ… νƒ€μ…(Predefined Annotation Types)
μλ°”μ—μ„ λ―Έλ¦¬ μ •μλ μ–΄λ…Έν…μ΄μ… νƒ€μ…μΌλ΅λ” java.langμ— μ •μλ ```@Deperecated```, ```@Override```, ```@SuppressWarnings```μ΄ μλ‹¤.

- @Deprecated
  ```@Deprecated``` μ–΄λ…Έν…μ΄μ…μ€ λ” μ΄μƒ μ‚¬μ©ν•λ©΄ μ• λκ±°λ‚, deprecatedλ΅ ν‘μ‹λ μ”μ†(element)λ¥Ό λ‚νƒ€λ‚Έλ‹¤. μ»΄νμΌλ¬λ” ν”„λ΅κ·Έλ¨μ—μ„
  ```@Deprecated``` μ–΄λ…Έν…μ΄μ…μ„ κ°€μ§„ λ©”μ†λ“, ν΄λμ¤, ν•„λ“λ¥Ό μ‚¬μ©ν•  λ•λ§λ‹¤ κ²½κ³ λ¥Ό λ§λ“¤μ–΄λ‚Έλ‹¤. μ”μ†(element)κ°€ λ” μ΄μƒ μ‚¬μ©λμ§€ μ•μ„ λ•(deprecated),  Javadocμ ```@deprecated``` νƒκ·Έλ¥Ό μ‚¬μ©ν•΄ λ¬Έμ„ν™” ν•΄μ•Ό ν•λ‹¤.
  μ•„λ μμ‹μ—μ„ Javadoc μ£Όμ„(comment)κ³Ό μ–΄λ…Έν…μ΄μ…μ΄ κ°™μ΄ μ“°μΈ κ²ƒμ€ λ‘ κ°κ°€ κ°λ…μ μΌλ΅ κ΄€λ ¨λμ–΄ μκΈ° λ•λ¬Έμ΄λ‹¤. λν•, Javadoc νƒκ·Έμ—μ„λ” μ†λ¬Έμ dλ΅ μ‹μ‘λμ—κ³ , μ–΄λ…Έν…μ΄μ…μ—μ„λ” λ€λ¬Έμ Dλ΅ μ‹μ‘λ κ²ƒμ„ μ•μ•„λ‘¬μ•Ό ν•λ‹¤.
  ```java
  // Javadoc comment follows
  /**
   * @deprecated
   * explanation of why it was deprecated
   */
  @Deprecated
  static void deprecatedMethod() { ... }
  ```
  μλ°” SE 9μ—μ„ ```forRemoval``` μ†μ„±μ΄ ```@Deprecated``` μ–΄λ…Έν…μ΄μ…μ— μ¶”κ°€λμ—λ‹¤. forRemovalμ€ ν•΄λ‹Ή μ–΄λ…Έν…μ΄μ…μ΄ λ‹¬λ¦° μ”μ†κ°€ ν–¥ν›„ λ²„μ „μ—μ„ μ κ±°λ μ§€ μ—¬λ¶€λ¥Ό λ‚νƒ€λ‚Έλ‹¤. κΈ°λ³Έκ°’μ€ falseμ΄λ‹¤.



- - - 
#### π“– μ°Έκ³ λ¬Έμ„
*  [μλ°” μ–΄λ…Έν…μ΄μ… νν† λ¦¬μ–Ό λ¬Έμ„](https://dev.java/learn/annotations/)
*  [μλ°” νƒ€μ… μ–΄λ…Έν…μ΄μ…, CSAIL λ””μ§€ν„Έ μ•„μΉ΄μ΄λΈ](http://publications.csail.mit.edu/abstracts/abstracts07/jsr308/jsr308.html)
*  [@Interned, @NonNull μ–΄λ…Έν…μ΄μ… μ¤λ¥ μ§λ¬Έ](https://stackoverflow.com/questions/20197440/java-8-type-annotations-and-jsr-308)
