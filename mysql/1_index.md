# 인덱스가 무엇일까?
- - -
###### ❗ 해당 글은 제가 공부했던 기억(도서 및 포스트 등)과 개인적 의견이 섞여 작성되었기 때문에 틀리거나 제대로 설명하지 못한 부분이 있을 수 있습니다. 의견 남겨주시면 감사히 여기며 수정하도록 하겠습니다.❗

##  1. 인덱스가 하는 일
- - -
*  인덱스는 데이터의 저장(```INSERT```, ```UPDATE```, ```DELETE```)의 성능을 희생하고 그 대신 데이터의 읽기 속도를 높이는, 테이블의 조회 속도를 높여주는 자료구조이다.   
  쉽게 말하면 특정 열 값이 있는 행을 빠르게 찾는데 사용되는 것으로, 인덱스가 있을 경우 테이블의 해당 열에 대한 모든 데이터를 살펴보지 않고도 찾을 위치를 빠르게 결정할 수 있다.   
이는 모든 행을 순차적으로 읽는 것보다 훨씬 빠르다. 모든 행을 순차적으로 읽는다면 O(N)의 시간복잡도를 가지겠지만, 인덱스의 경우는 다르다.
MySQL에서 사용하는 인덱스의 경우 크게 B-트리 인덱스와 해시 인덱스가 있다.

### 1.1 인덱스가 사용되는 작업
1. ```WHERE```절과 일치하는 행을 찾는 경우
2. 테이블에 다중 열 인덱스가 있는 경우, 인덱스의 가장 왼쪽의 prefix 인덱스가 옵티마이저에 행을 조회하는 데에 사용될 수 있다.
3. ```join```이 수행될 때 다른 테이블의 검색된 행을 

## 2. 인덱스 알고리즘의 종류

### 2.1  B-Tree 인덱스
#### B-Tree   
B-트리는 데이터베이스 인덱스에서 널리 사용되는 트리 데이터 구조이다. MySQL의 대부분 인덱스(PRIMARY KEY, UNIQUE, INDEX, FULLTEXT)는 B-트리를 사용한다. 트리의 높이에 따라 약간의 차이가
있을 수 있지만 O(logN)의 시간을 가진다.   
예외적으로 공간 검색의 경우는 R-tree를 사용한다.   
#### B-Tree 인덱스의 특성
B-트리 인덱스는 ```=, >, >=, <, <=``` 비교연산자나 ```BETWEEN``` 연산자에 사용된다. ```LIKE``` 또한 와일드카드 문자로 시작하지 않는 경우 이를 사용한다. 예를 들어,
```mysql
SELECT * FROM table_name WHERE key_col LIKE 'study%';
SELECT * FROM table_name WHERE key_col LIKE 's%dy%';
SELECT * FROM table_name WHERE key_col LIKE '%study%';
```
 세 가지의 ```SELECT``` 구문이 있다고 할 때, 위의 두 구문은 B-Tree 인덱스가 사용되지만, 와일드카드로 감싼 마지막 구문의 경우는 인덱스가 고려되지 않는다.   
만약 '%문자열%'를 사용한다면 문자(characters)가 세 개 이상일 때 MySQL은 Turbo Boyer-Moore 알고리즘을 사용하여 문자열의 패턴을 초기화한 다음 사용해 검색을 더욱 빠르게 수행한다고 한다.   

 와일드카드로 감싼 ```LIKE``` 연산자를 사용할 때, 긴 문자의 경우 알고리즘을 통해 문자열을 패턴화해 검색 속도를 돕는다고 하지만, 인덱스가 고려되지 않기 때문에 테이블의 행이 많아질수록  
 검색에 더 많은 시간이 걸릴 것으로 생각된다.

 또한 ```AND```연산자를 사용할 경우 특정 조건을 지키지 않는다면 인덱스가 사용되지 않는다. 인덱스가 사용되지 않는 경우로는,   
 1. 인덱스가 



- - - 
#### 📖 참고문서
*  [MySQL 8.0 참조 설명서](https://dev.mysql.com/doc/refman/8.0/en/)   
*  [B 트리 정의, 위키백과](https://ko.wikipedia.org/wiki/B_%ED%8A%B8%EB%A6%AC)
